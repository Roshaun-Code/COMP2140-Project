<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment Scheduler</title>
    <link rel="stylesheet" href="styles/barberindexstyle.css">
</head>

<body>
    <header class="header">
        <div class="header-content">
            <div class="account-info">
                Account: User
            </div>
            <div class="banner">
                <h1>Welcome to Our Salon</h1>
            </div>
            <button id="logoutButton" class="button logout-button">Logout</button>
        </div>
    </header>

    <div class="scheduler">
        <div class="calendar">
        </div>
        <div class="appointment-form">
            <form id="appointmentForm" action="#" method="post">
                <h2>Book Appointment</h2>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="date">Date:</label>
                <input type="date" id="date" name="date" required>

                <label for="time">Time:</label>
                <input type="time" id="time" name="time" required>

                <label for="barber">Select Barber/Hairdresser:</label>
                <select id="barber" name="barber" required>
                    <option value="">--Please choose an option--</option>
                    <option value="robertbailey">Robert Bailey (Barber)</option>
                    <option value="oaklandporter">Oakland Porter (Barber)</option>
                    <option value="roshaunporter">Roshaun Porter (Barber)</option>
                    <option value="feleciahembram">Felecia Hembram (Hairdresser)</option>
                    <option value="stephanniejames">Stephannie James (Hairdresser)</option>
                    <option value="jennifermcfarlene">Jennifer Mcfarlene (Hairdresser)</option>
                </select>

                <label for="service">Select Service:</label>
                <select id="service" name="service" required>
                    <option value="">--Please choose an option--</option>
                </select>

                <label for="specify">Specify:</label>
                <textarea id="specify" name="specify" rows="4" placeholder="Additional details..."></textarea>

                <input type="button" value="Schedule Appointment" onclick="scheduleAppointment()" id="appointmentButton">
            </form>
            <div id="confirmationMessage" class="confirmation-message"></div>
            <button id="cancelButton" class="button" style="display:none;">Cancel Appointment</button>
            <button id="rescheduleButton" class="button" style="display:none;">Reschedule Appointment</button>
        </div>

        <!-- Modal for Rescheduling Appointments -->
        <div id="rescheduleModal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h2>Reschedule Appointment</h2>
                <form id="rescheduleForm">
                    <label for="rescheduleDate">New Date:</label>
                    <input type="date" id="rescheduleDate" name="rescheduleDate" required>

                    <label for="rescheduleTime">New Time:</label>
                    <input type="time" id="rescheduleTime" name="rescheduleTime" required>

                    <input type="submit" value="Reschedule">
                </form>
            </div>
        </div>
    </div>

    <script>
        // Function to update services based on the selected barber or hairdresser
        function updateServices() {
            var barberSelect = document.getElementById('barber');
            var serviceSelect = document.getElementById('service');
            var selectedBarber = barberSelect.value;

            // Define services for barbers and hairdressers
            var services = {
                'robertbailey': ['Line Up', 'Taper Fade', 'Shaved Head/Bald', 'Buzz Cut/Lowcut', 'Clean Shaven (Facial)', 'Goatee (Facial)'],
                'oaklandporter': ['Line Up', 'Taper Fade', 'Shaved Head/Bald', 'Buzz Cut/Lowcut', 'Clean Shaven (Facial)', 'Goatee (Facial)'],
                'roshaunporter': ['Line Up', 'Taper Fade', 'Shaved Head/Bald', 'Buzz Cut/Lowcut', 'Clean Shaven (Facial)', 'Goatee (Facial)'],
                'feleciahembram': ['Braids', 'Sew In', 'Relaxing Hair', 'Wig Installation'],
                'stephanniejames': ['Braids', 'Sew In', 'Relaxing Hair', 'Wig Installation'],
                'jennifermcfarlene': ['Braids', 'Sew In', 'Relaxing Hair', 'Wig Installation']
            };

            // Clear options
            serviceSelect.innerHTML = '<option value="">--Please choose an option--</option>';

            // Add new options based on the selected barber or hairdresser
            if (selectedBarber in services) {
                services[selectedBarber].forEach(function (service) {
                    var option = document.createElement('option');
                    option.value = service.toLowerCase().replace(/\s+/g, '_'); // use with underscores
                    option.text = service;
                    serviceSelect.add(option);
                });
            }
        }

        // Function to gather appointment details and show a prompt
        function scheduleAppointment() {
            var name = document.getElementById('name').value;
            var date = document.getElementById('date').value;
            var time = document.getElementById('time').value;
            var barber = document.getElementById('barber').value;
            var service = document.getElementById('service').value;
            var specify = document.getElementById('specify').value;

            var appointmentDetails = `
                Name: ${name}
                Date: ${date}
                Time: ${time}
                Barber/Hairdresser: ${barber}
                Service: ${service}
                Specify: ${specify}
            `;

            alert("Appointment Details:\n\n" + appointmentDetails);

            document.getElementById('confirmationMessage').innerText = 'Appointment Set!';
            document.getElementById('cancelButton').style.display = 'block';
            document.getElementById('rescheduleButton').style.display = 'block';

            setTimeout(3);
             window.location.href = "admin.html";
        }

        // Event listener for barber selection
        document.getElementById('barber').addEventListener('change', function () {
            updateServices();
        });

        // Event listener for cancel button
        document.getElementById('cancelButton').addEventListener('click', function () {
            alert('Appointment canceled!');
        });

        // Event listener for reschedule button
        document.getElementById('rescheduleButton').addEventListener('click', function () {
            document.getElementById('rescheduleModal').style.display = 'block';
        });

        // Event listener for close button in the modal
        document.querySelector('.close-button').addEventListener('click', function () {
            document.getElementById('rescheduleModal').style.display = 'none';
        });

        // Event listener for reschedule form submission
        document.getElementById('rescheduleForm').addEventListener('submit', function (event) {
            event.preventDefault();
            alert('Rescheduled Successfully!');
            //logic for rescheduling the appointment
            document.getElementById('rescheduleModal').style.display = 'none';
        });
    </script>
</body>

</html>
